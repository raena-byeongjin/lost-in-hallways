using System.Collections;
using System.Collections.Generic;
using UnityEngine.Advertisements;
using UnityEngine;

//-----------------------------------------------------------------------------------------------------------------------------------
// 광고 정보를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
#if UNITY_ADS
	public class CAds : MonoBehaviour, IUnityAdsListener
#else
	public class CAds : MonoBehaviour
#endif
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
    [System.Serializable]
    public class tagData
    {
	    //---------------------------------------------------------------------------------------------------------------------------
        // -
	    //---------------------------------------------------------------------------------------------------------------------------
		public string	PlacementId		= "rewardedVideo";

	    //---------------------------------------------------------------------------------------------------------------------------
        // -
	    //---------------------------------------------------------------------------------------------------------------------------
    };
    public tagData	data	= new tagData();

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	protected CApp		app			= (null);
	protected CPlay		play		= (null);

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	void OnEnable()
	{
		(this.app)		= (CApp.This);
		(this.play)		= (CPlay.This);
	}

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
	void Awake()
	{
#if UNITY_ADS
        //---------------------------------------------------------------------------------------------------------------------------
        // Initialize the Ads listener and service
        //---------------------------------------------------------------------------------------------------------------------------
        Advertisement.AddListener(this);

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		UnityEngine.Advertisements.Advertisement.Initialize( "3292182", CEngine.IsEditor() );
#endif

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
    // Implement IUnityAdsListener interface methods:
	//-------------------------------------------------------------------------------------------------------------------------------
#if UNITY_ADS
    public void OnUnityAdsDidFinish( string placementId, ShowResult showResult )
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // Define conditional logic for each ad completion status:
        //---------------------------------------------------------------------------------------------------------------------------
        if( (showResult)==(ShowResult.Finished) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
            // Reward the user for watching the ad to completion.
			//-----------------------------------------------------------------------------------------------------------------------
//			Debug.Log("Reward the user for watching the ad to completion.");

			//-----------------------------------------------------------------------------------------------------------------------
            // -
			//-----------------------------------------------------------------------------------------------------------------------
			Finished( placementId );

			//-----------------------------------------------------------------------------------------------------------------------
            // -
			//-----------------------------------------------------------------------------------------------------------------------
        }
		else
		if( (showResult)==(ShowResult.Skipped) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
            // Do not reward the user for skipping the ad.
			//-----------------------------------------------------------------------------------------------------------------------
//			Debug.Log("Do not reward the user for skipping the ad.");
			app.Confirm.ON( "광고를 끝까지 시청해야 보상을 받을 수 있습니다." );

			//-----------------------------------------------------------------------------------------------------------------------
            // -
			//-----------------------------------------------------------------------------------------------------------------------
        }
		else
		if( (showResult)==(ShowResult.Failed) )
		{
            Debug.LogWarning("The ad did not finish due to an error.");
        }

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
    }
#endif

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
    public void OnUnityAdsReady( string placementId )
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // If the ready Placement is rewarded, show the ad:
        //---------------------------------------------------------------------------------------------------------------------------
        if( (placementId)==(data.PlacementId) )
		{
        }

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
    }

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
    public void OnUnityAdsDidError( string message )
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // Log the error.
        //---------------------------------------------------------------------------------------------------------------------------
    }

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
    public void OnUnityAdsDidStart (string placementId)
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // Optional actions to take when the end-users triggers an ad.
        //---------------------------------------------------------------------------------------------------------------------------
    }

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Show( string placementId )
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		if( (placementId)==(null) ) return;

#if UNITY_ADS
        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		Advertisement.Show(placementId);
#endif

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
    public void Finished( string placementId )
	{
		/*
        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
        if( (placementId)=="CharacterSummon" )
		{
			if( app.ViewCharacter.Is() )
			{
				app.MessageQueue.ON( (app.Character.funcSummon), app.ViewCharacter.Character(), (null), (1f) );
				app.ViewCharacter.OFF();
			}
		}
		*/

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
    // -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------