using System.Collections.Generic;
using UnityEngine;

//-----------------------------------------------------------------------------------------------------------------------------------
// Home 인터페이스를 처리하기 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class CViewHome : ViewPanel
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	[System.Serializable]
	public class tagData : _tagData
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public objControl			wallet						= (null);
		public objControl			stock						= (null);
		public objControl			person						= (null);
		public objControl			transport					= (null);
		public objControl			industry_encyclopedia		= (null);
		public objControl			billionaire_rank			= (null);
		public objControl			naver_cafe					= (null);
		
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		public List<objControl>		Icons						= new List<objControl>();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	};
	public tagData		data		= new tagData();

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool ON()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( base.ON(data) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
//			ForeBack();
//			Indigator( app.Language.Get(TEXT.기업_정보를_불러오는_중입니다) );
			Fullscreen();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			app.Canvas.FullscreenScrollViewInit( ScrollView()._RectTransform() );

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			Component[] comArray = ScrollView().Content().GetComponentsInChildren(typeof(objControl));
			foreach( objControl control in comArray )
			{
				if( !(control.data.ignoreScrollView) )
				{
					(control._RectTransform().sizeDelta)	= new Vector2( tagSystem.GetScreenWidth()/(3), tagSystem.GetScreenWidth()/(3) );
					GetList().Add( control );
				}
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			Refresh();

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return base.ON();
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 네비게이션을 처리하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void ONNAVIGATION()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.ViewNavigation.ON( (this), app.Language.Get(TEXT.전체_보기) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스가 전면에 출력되었을 때 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void ONFORE()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		app.ViewBottom.Fore();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 비활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool OFF()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( Is(true) )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			return base.OFF();
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 리스트를 얻기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public List<objControl> GetList()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return (data.Icons);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 리스트를 새로고침 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void Refresh()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		ScrollView().Init();

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		int	i = (0);
		int nPattern = (0);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (ScrollView().Content().sizeDelta.y)<ScrollView().Height() )
		{
			(nPattern)	= (GetList().Count)%(2);
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(nPattern)	= (1) - (nPattern);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		foreach( objControl icon in GetList() )
		{
			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			if( (i+nPattern)%(2)==(0) )
			{
				(icon.Image().color)	= Func.Color( (32), (46), (69) );
			}
			else
			{
				(icon.Image().color)	= Func.Color( (24), (34), (52) );
			}

			//-----------------------------------------------------------------------------------------------------------------------
			// -
			//-----------------------------------------------------------------------------------------------------------------------
			(i)	++;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 취소 입력에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool ONCANCEL( CANCEL Cancel )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( Is() )
		{
			return OFF();
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 활성화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override bool ONCONTROL( objControl control, CONTROL_ACTION Action, tagFocus focus )
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(null) ) return false;

		//---------------------------------------------------------------------------------------------------------------------------
		// 자금 (WALLET)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.wallet) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewWallet.ON( app.Identity.GetCashes() );
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 주식 (STOCK)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.stock) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewStockInventory.ON();
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 경영자 (PERSON)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.person) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewPersonList.ON();
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 운송 (TRANSPORT)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.transport) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewTransportList.ON();
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 제조업 가이드 (Industry Encyclopedia)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.industry_encyclopedia) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewIndustryEncyclopediaList.ON();
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 억만장자 순위 (Billionaire Rank)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.billionaire_rank) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			app.ViewBillionaireRank.ON();
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// 네이버 카페 (Naver Cafe)
		//---------------------------------------------------------------------------------------------------------------------------
		if( (control)==(data.naver_cafe) && (Action)==(CONTROL_ACTION.SELECT) )
		{
			Application.OpenURL(SYSTEM.URL_NAVER_CAFE);
			return true;
		}

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		return false;
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 메모리를 초기화 하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void Unloader()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(data.wallet)					= (null);
		(data.stock)					= (null);
		(data.person)					= (null);
		(data.transport)				= (null);
		(data.industry_encyclopedia)	= (null);
		(data.billionaire_rank)			= (null);
		(data.naver_cafe)				= (null);
		
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 인터페이스를 불러오기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public override void Loader()
	{
		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		base.Loader( Resources.Load("ApplicationLoader/View/ViewHome"), (play.uiCanvas) );

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
		(data.wallet)					= (Func.Get( ScrollView().Content(), "Wallet" ).GetComponent(typeof(objControl)) as objControl);
		(data.stock)					= (Func.Get( ScrollView().Content(), "Stock" ).GetComponent(typeof(objControl)) as objControl);
		(data.person)					= (Func.Get( ScrollView().Content(), "Person" ).GetComponent(typeof(objControl)) as objControl);
		(data.transport)				= (Func.Get( ScrollView().Content(), "Transport" ).GetComponent(typeof(objControl)) as objControl);
		(data.industry_encyclopedia)	= (Func.Get( ScrollView().Content(), "IndustryEncyclopedia" ).GetComponent(typeof(objControl)) as objControl);
		(data.billionaire_rank)			= (Func.Get( ScrollView().Content(), "BillionaireRank" ).GetComponent(typeof(objControl)) as objControl);
		(data.naver_cafe)				= (Func.Get( ScrollView().Content(), "NaverCafe" ).GetComponent(typeof(objControl)) as objControl);

		//---------------------------------------------------------------------------------------------------------------------------
		// -
		//---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------