using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.EventSystems;

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------
public class ControlProtocal : MonoBehaviour
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void OnClick()
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		if( !(CPlay.This.allowUserInput) ) return;

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		GameObject obj = (EventSystem.current.currentSelectedGameObject);
		if( (obj)!=(null) )
		{
			objControl control = (obj.GetComponent(typeof(objControl)) as objControl);
			if( (control)!=(null) )
			{
				CApp.This.ONCONTROL( (control), (CONTROL_ACTION.SELECT) );
			}
		}

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
//		EventSystem.current.SetSelectedGameObject( null );

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// 텍스트 입력에 반응하기 위한 함수
	//-------------------------------------------------------------------------------------------------------------------------------
	public void OnCharacterNameEdit( string text )
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		if( (text)==(null) ) return;

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		string	letter		= (null);
		string	result		= (null);
		int		length		= (0);

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		for( int i=0; i<(text.Length); i++ )
		{
			//-----------------------------------------------------------------------------------------------------------------------
		    // -
	        //-----------------------------------------------------------------------------------------------------------------------
			(letter)	= text[i].ToString();

			//-----------------------------------------------------------------------------------------------------------------------
		    // -
	        //-----------------------------------------------------------------------------------------------------------------------
			if( (i)==(0) && Library.IsNumber(letter) )
			{
//				(CApp.This.ViewNameInput.data.InputField.text)	= (result);
//				CApp.This.ViewAlert.ON( CApp.This.Language.Get(TEXT.첫글자는_영문이어야_합니다), (3f), (true) );
				return;
			}
			/*
			else
			if( Library.IsSpecialChar(letter) )
			{
				CApp.This.ViewAlert.ON( "특수문자는 사용할 수 없습니다.", (3f) );
			}
			*/
			else
			if( Func.IsAlphabetAndNumber(letter) )
			{
				(length)	+= (1);
			}
			else
			{
				(length)	+= (2);
			}

			//-----------------------------------------------------------------------------------------------------------------------
		    // -
	        //-----------------------------------------------------------------------------------------------------------------------
			if( (length)>(16) )
			{
//				(CApp.This.ViewNameInput.data.InputField.text)	= (result);
//				CApp.This.ViewAlert.ON( CApp.This.Language.Get(TEXT.이름은_영문_16글자까지만_가능합니다), (3f), (true) );
				return;
			}

			//-----------------------------------------------------------------------------------------------------------------------
		    // -
	        //-----------------------------------------------------------------------------------------------------------------------
			(result)	+= (letter);

			//-----------------------------------------------------------------------------------------------------------------------
		    // -
	        //-----------------------------------------------------------------------------------------------------------------------
		}

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
	public void OnScrollChange( Vector2 value )
	{
        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		GameObject	obj		= (EventSystem.current.currentSelectedGameObject);
		if( (obj)==(null) )
		{
			(obj)	= CApp.This.Canvas.Pick( Input.mousePosition );
		}

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
		if( (obj)!=(null) )
		{
			objPanel		panel			= (obj.GetComponentInParent(typeof(objPanel)) as objPanel);
			objScrollView	scrollView		= (obj.GetComponentInParent(typeof(objScrollView)) as objScrollView);
			if( (panel)!=(null) && (scrollView)!=(null) )
			{
				if( panel.ReciveComponent()!=(null) )
				{
					//---------------------------------------------------------------------------------------------------------------
					// -
					//---------------------------------------------------------------------------------------------------------------
					if( panel.ReciveComponent().ScrollView()!=(scrollView) )
					{
						Debug.Log( "스크롤 뷰 객체 정보에 오류가 있습니다. : "+(panel)+", "+(scrollView), (scrollView) );
					}

					//---------------------------------------------------------------------------------------------------------------
					// -
					//---------------------------------------------------------------------------------------------------------------
					panel.ReciveComponent().ONSCROLLCHANGE( (scrollView), (value) );

					//---------------------------------------------------------------------------------------------------------------
					// -
					//---------------------------------------------------------------------------------------------------------------
				}
			}
			else
			if( (EventSystem.current.currentSelectedGameObject)!=(null) )
			{
//				Debug.Log( "스크롤 뷰 객체 정보에 오류가 있습니다. : "+(obj) );
			}
		}

        //---------------------------------------------------------------------------------------------------------------------------
        // -
        //---------------------------------------------------------------------------------------------------------------------------
	}

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------