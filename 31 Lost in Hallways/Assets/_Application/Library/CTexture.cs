using UnityEngine;
using System.Collections;
using System.IO;

//-----------------------------------------------------------------------------------------------------------------------------------
// 텍스쳐 정보를 처리하기 위한 클래스 위한 클래스
//-----------------------------------------------------------------------------------------------------------------------------------
public class CTexture : MonoBehaviour
{
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
    public static Texture2D Load( byte[] bytes, FilterMode filterMode=(FilterMode.Bilinear) )
    {
	    //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        if( (bytes)==(null) ) return (null);

	    //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        Texture2D   texture     = new Texture2D( (0), (0), (TextureFormat.RGBA32), (false) );
        if( texture.LoadImage(bytes) )
        {
			(texture.filterMode)	= (filterMode);
            return (texture);
        }

	    //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        return (null);
    }

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
    public static Texture2D Load( string filepath, FilterMode filterMode=(FilterMode.Bilinear) )
    {
	    //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        if( (filepath)==(null) ) return (null);
        if( !File.Exists(filepath) ) return (null);

	    //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        byte[]		bytes	= Func.ReadAllBytes(filepath);
        if( (bytes)==(null) ) return (null);

	    //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        return Load( (bytes), (filterMode) );
    }
    
	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
    public static void Save( string filepath, Texture2D texture )
    {
        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        if( (filepath)==(null) ) return;
        if( (texture)==(null) ) return;

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
        if( (texture)!=(null) )
        {
            //-----------------------------------------------------------------------------------------------------------------------
	        // -
	        //-----------------------------------------------------------------------------------------------------------------------
            byte[]  pngdata     = texture.EncodeToPNG();

            //-----------------------------------------------------------------------------------------------------------------------
	        // -
	        //-----------------------------------------------------------------------------------------------------------------------
            if( (pngdata)!=(null) )
            {
                File.WriteAllBytes( (filepath), (pngdata) );
            }

            //-----------------------------------------------------------------------------------------------------------------------
	        // -
	        //-----------------------------------------------------------------------------------------------------------------------
        }

        //---------------------------------------------------------------------------------------------------------------------------
	    // -
	    //---------------------------------------------------------------------------------------------------------------------------
    }

	//-------------------------------------------------------------------------------------------------------------------------------
	// -
	//-------------------------------------------------------------------------------------------------------------------------------
}

//-----------------------------------------------------------------------------------------------------------------------------------
// -
//-----------------------------------------------------------------------------------------------------------------------------------